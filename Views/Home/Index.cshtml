@{
    ViewData["Title"] = "Home";
    var username = User.Identity?.Name ?? "User";
}

@{
    var isUserRole = User.IsInRole("User");
    var isAdminRole = User.IsInRole("Admin");
    var isGuestRole = User.IsInRole("Guest");
}

<style>
    .home-container {
        padding: 20px;
    }

    .welcome {
        font-size: 20px;
        margin-bottom: 20px;
    }

    .tabs {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
        border-bottom: 2px solid #ddd;
    }

    .tabs a {
        padding: 10px 15px;
        text-decoration: none;
        color: #333;
        font-weight: bold;
        border-bottom: 3px solid transparent;
    }

    .tabs a.active {
        border-bottom: 3px solid #007bff;
        color: #007bff;
    }

    .content-panel {
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 6px;
        min-height: 300px;
        background-color: #fff;
    }
</style>

<div class="home-container">

    <!-- Welcome Title -->
    <div class="welcome">
        Welcome, <strong>@username</strong>
    </div>

    @if (isUserRole)
    {
        <!-- Register User menu tabs -->
        <div class="tabs">
            <a asp-controller="Home" asp-action="Index" asp-route-tab="dashboard"
            class="@(ViewBag.ActiveTab == "dashboard" ? "active" : "")">
                Dashboard
            </a>

            <a asp-controller="Home" asp-action="Index" asp-route-tab="vehicles"
            class="@(ViewBag.ActiveTab == "vehicles" ? "active" : "")">
                Vehicles
            </a>

            <a asp-controller="Home" asp-action="Index" asp-route-tab="expenses"
            class="@(ViewBag.ActiveTab == "expenses" ? "active" : "")">
                Expenses
            </a>

            <a asp-controller="Home" asp-action="Index" asp-route-tab="trips"
            class="@(ViewBag.ActiveTab == "trips" ? "active" : "")">
                Trips
            </a>
        </div>

        <div class="content-panel">
            @await Html.PartialAsync($"_User{ViewBag.ActiveTab}")
        </div>
    }
    else if (isGuestRole)
    {
        <!-- Guest menu tabs -->
        <div class="tabs">
            <a asp-controller="Home" asp-action="Index" asp-route-tab="tripcalc"
            class="@(ViewBag.ActiveTab == "tripcalc" ? "active" : "")">
                Trip Calculation
            </a>
        </div>

        <div class="content-panel">
            @await Html.PartialAsync("_GuestTripCalc")
        </div>
    }
</div>
